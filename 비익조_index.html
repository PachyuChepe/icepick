<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>아이스픽</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/slide.css" />
    <link rel="stylesheet" href="css/character.css" />
    <link rel="stylesheet" href="css/modal.css" />
</head>

<body>
  <header class="p-3 text-bg-dark">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
        <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
          <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
            <use xlink:href="#bootstrap"></use>
          </svg>
        </a>



        <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
          <li>
            <a href="#" class="nav-link px-2 text-secondary"><img
                src="https://blog.kakaocdn.net/dn/nPHIX/btswbChyDep/Id9lRpNNLWqQXr9vGiWgR1/img.gif"
                style="width: 20px; height: 20px" alt="My Image" /></a>
          </li>
          <li><a href="#" class="nav-link px-2 text-white">비익조</a></li>
        </ul>

        <div class="text-end">
          <button type="button" class="btn custom-button" id="modalOpenButton">팀 가입</button>

          <div id="modalContainer" class="hidden">
            <div id="modalContent">
              <div class="modal-header">
                <h2><span class="close" id="modalCloseButton">&times;</span></h2>
                <h3 id="signin">비익조 팀원 등록</h3>
              </div>
              <div class="mypostingbox" id="postingbox">
                <div class="form-floating mb-3">
                  <input type="email" class="form-control" id="image" placeholder="캐릭터 이미지 주소">
                  <label for="floatingInput">캐릭터 이미지 주소</label>
                </div>

                <div class="form-floating mb-3">
                  <input type="email" class="form-control" id="mname" placeholder="이름">
                  <label for="floatingInput">이름</label>
                </div>

                <div class="form-floating mb-3">
                  <input type="email" class="form-control" id="lv" placeholder="레벨(나이)">
                  <label for="floatingInput">레벨(나이)</label>
                </div>

                <div class="form-floating mb-3">
                  <input type="email" class="form-control" id="dono" placeholder="도감번호">
                  <label for="floatingInput">도감번호(생년월일)</label>
                </div>

                <div class="form-floating mb-3">
                  <input type="email" class="form-control" id="skills" placeholder="배운 기술">
                  <label for="floatingInput">배운 기술</label>
                </div>

                <div class="form-floating mb-3">
                  <input type="email" class="form-control" id="mbti" placeholder="MBTI">
                  <label for="floatingInput">MBTI</label>
                </div>

                <div class="form-floating mb-3" style="display: inline-block;">
                  <input type="email" class="form-control" id="mbti_e" placeholder="E 수치"><label for="floatingInput">외향형
                    E
                    수치</label>
                </div>
                <div class="form-floating mb-3" style="display: inline-block;">
                  <input type="email" class="form-control" id="mbti_i" placeholder="I 수치"><label for="floatingInput">내향형
                    I
                    수치</label>
                </div>
                <div class="form-floating mb-3" style="display: inline-block;">
                  <input type="email" class="form-control" id="mbti_s" placeholder="S 수치"><label for="floatingInput">감각형
                    S
                    수치</label>
                </div>
                <div class="form-floating mb-3" style="display: inline-block;">
                  <input type="email" class="form-control" id="mbti_n" placeholder="N 수치"><label for="floatingInput">직관형
                    N
                    수치</label>
                </div>
                <div class="form-floating mb-3" style="display: inline-block;">
                  <input type="email" class="form-control" id="mbti_t" placeholder="T 수치"><label for="floatingInput">사고형
                    T
                    수치</label>
                </div>
                <div class="form-floating mb-3" style="display: inline-block;">
                  <input type="email" class="form-control" id="mbti_f" placeholder="F 수치"><label for="floatingInput">감정형
                    F
                    수치</label>
                </div>
                <div class="form-floating mb-3" style="display: inline-block;">
                  <input type="email" class="form-control" id="mbti_j" placeholder="J 수치"><label for="floatingInput">판단형
                    J
                    수치</label>
                </div>
                <div class="form-floating mb-3" style="display: inline-block;">
                  <input type="email" class="form-control" id="mbti_p" placeholder="P 수치"><label for="floatingInput">인식형
                    P
                    수치</label>
                </div>





                <div class="form-floating mb-3">
                  <input type="email" class="form-control" id="comment" placeholder="comment">
                  <label for="floatingInput">한마디</label>
                </div>

                <button type="button" class="btn btn-danger" id="postingbtn">기록하기</button>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </header>

  <div class="showstart">
    <div class="slideshow-container">
      <div class="slideshow">
        <!-- 첫 번째 이미지 -->
        <img
          src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbhsMI9%2FbtswPVmDhHB%2FvP9B7TR1ewiSSnCRj4S4K0%2Fimg.jpg"
          alt="Image 1" />
        <!-- 두 번째 이미지 -->
        <img
          src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbgS8rs%2Fbtsw0iIWDcO%2Fm90kWI4HWk8WoHNLRECaXK%2Fimg.jpg"
          alt="Image 2" />
        <img
          src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fbfon4p%2FbtswJDf4a7a%2Ftb83tAdaKXQ8jXeD3FQW11%2Fimg.jpg"
          alt="Image 3" />
        <img
          src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FnqT97%2Fbtsw0gLf4Tb%2FId80J8BLDB61jCkEtxLd0k%2Fimg.jpg"
          alt="Image 4" />
        <img
          src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FyGs1I%2Fbtsxd3jz8fQ%2FJSBuuHz6dKFJRZpNkSPjUk%2Fimg.jpg"
          alt="Image 5" />
      </div>
    </div>
    <span class="slideshow-arrow prev" onclick="plusSlides(-1)">&#10094;</span>
    <span class="slideshow-arrow next" onclick="plusSlides(1)">&#10095;</span>
  </div>

  <div class="mycards">
    <div id="card" class="row row-cols-1 row-cols-md-6 g-6">
    </div>
  </div>



  <div class="main">
  </div>

  <script type="module">
    // Firebase SDK 라이브러리 가져오기
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";


    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyAqgZTkIOU1FDJxLH8CZbBEtt4wA6UK0a0",
      authDomain: "sparta-Aleejin.firebaseapp.com",
      projectId: "sparta-leejin",
      storageBucket: "sparta-leejin.appspot.com",
      messagingSenderId: "44861350306",
      appId: "1:44861350306:web:3294770f6384aed70ed2fb",
      measurementId: "G-EWJVC04VRL"
    };

    // Firebase 인스턴스 초기화
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    $("#postingbtn").click(async function () {

      $("#postingbtn").click(async function () {
        let image = $('#image').val();
        let mname = $('#mname').val();
        let lv = $('#lv').val();
        let dono = $('#dono').val();
        let skills = $('#skills').val();
        let mbti = $('#mbti').val();
        // 추가
        let mbti_i = $('#mbti_i').val();
        let mbti_e = $('#mbti_e').val();
        let mbti_s = $('#mbti_s').val();
        let mbti_n = $('#mbti_n').val();
        let mbti_t = $('#mbti_t').val();
        let mbti_f = $('#mbti_f').val();
        let mbti_j = $('#mbti_j').val();
        let mbti_p = $('#mbti_p').val();
        let comment = $('#comment').val();


        let doc = {
          'image': image,
          'mname': mname,
          'lv': lv,
          'dono': dono,
          'skills': skills,
          'mbti': mbti,
          'mbti_i': mbti_i,
          'mbti_e': mbti_e,
          'mbti_s': mbti_s,
          'mbti_n': mbti_n,
          'mbti_t': mbti_t,
          'mbti_f': mbti_f,
          'mbti_j': mbti_j,
          'mbti_p': mbti_p,
          'comment': comment

        };
        await addDoc(collection(db, "mambers"), doc);
        alert('저장 완료!');
        window.location.reload();
      })
    })

    let docs = await getDocs(collection(db, "mambers"));
    docs.forEach((doc) => {
      let row = doc.data();

      let image = row['image'];
      let mname = row['mname'];
      let lv = row['lv'];
      let dono = row['dono'];
      let skills = row['skills'];
      let mbti = row['mbti'];
      let comment = row['comment'];
      let mbti_i = row['mbti_i'];
      let mbti_e = row['mbti_e'];
      let mbti_s = row['mbti_s'];
      let mbti_n = row['mbti_n'];
      let mbti_t = row['mbti_t'];
      let mbti_f = row['mbti_f'];
      let mbti_j = row['mbti_j'];
      let mbti_p = row['mbti_p'];

      let temp_html = `            
            <div class="col">
                <div class="card h-100 bg-transparent border-black text-white text-center">
                    <img src="${image}" class="card-img-top" alt="...">
                        <h5 class="card-title">${mname}</h5>
                        <p class="card-text">${dono}</p>
                </div>
            </div>`;
      $('#card').append(temp_html);
    });

    $(document).on("click", ".card-img-top", function() {
  // 클릭한 이미지의 데이터 가져오기
  const imageSrc = $(this).attr('src');
  const cardTitle = $(this).siblings('.card-title').text(); // 예제로 card-title 클래스를 사용했습니다.
  const cardText = $(this).siblings('.card-text').text();   // 예제로 card-text 클래스를 사용했습니다.
  
  // 모달 창에 데이터 설정
  $('#modalImage1').attr('src', imageSrc); // id="modalImage1"
  $('#modalTitle1').text(cardTitle);       // id="modalTitle1"
  $('#modalText1').text(cardText);         // id="modalText1"
  
  // 모달 창 열기
  $('#modalContainer1').removeClass('hidden'); // id="modalContainer1"
});

// 모달 닫기 버튼
$('#modalCloseButton1').click(function() {
  $('#modalContainer1').addClass('hidden'); // id="modalContainer1"
});


    // $("#savebtn").click(async function () {
    //   $('#postingbox').toggle();
    // })
    </script>

      <script src="script/slides.js"></script>
      <script src="script/modal.js"></script>

      <div id="modalContainer1" class="hidden"> <!-- id="modalContainer1" 추가 -->
        <div id="modalContent1"> <!-- id="modalContent1" 추가 -->
          <div class="modal-header">
            <h2><span class="close" id="modalCloseButton1">&times;</span></h2> <!-- id="modalCloseButton1" 추가 -->
            <h3 id="signin1">이미지 모달</h3>
          </div>
          <div class="mypostingbox" id="postingbox1"> <!-- id="postingbox1" 추가 -->
            <!-- 이미지 표시를 위한 요소 -->
            <img id="modalImage1" src="" alt="Modal Image" style="max-width: 100%; max-height: 100%;" /> <!-- id="modalImage1" 추가 -->
      
            <!-- 데이터를 표시할 요소들 -->
            <h4 id="modalTitle1"></h4> <!-- id="modalTitle1" 추가 -->
            <p id="modalText1"></p>   <!-- id="modalText1" 추가 -->
      
            <!-- 닫기 버튼 -->
            <button type="button" class="btn btn-danger" id="modalCloseButton1">닫기</button> <!-- id="modalCloseButton1" 추가 -->
          </div>
        </div>
      </div>
      
</body>

</html>